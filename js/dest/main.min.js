/*! SassyWebTemplate - v0.1.4 - 07-27-2015 */"use strict";var app=angular.module("app",["ui.bootstrap"]),app_extension={run:function(a,b){console.log("parms",b);var c=app_extension.finder("run",a,b);return app_extension.refresh(),c},get:function(a){return app_extension.finder("get",a)},set:function(a,b){var c=app_extension.finder("set",a,b);return app_extension.refresh(),c},getScope:function(){return angular.element(document).scope()},refresh:function(){app_extension.getScope().$apply()},finder:function(type,location,paramsOrValues){var module=app_extension.getScope(),child=module.$$childTail,look=app_extension.look(location),result=look.result;switch(0==result&&(type="doNotRun"),type){case"run":var params=angular.isUndefined(paramsOrValues)?[]:paramsOrValues;if(angular.isFunction(result))return result.apply(module,params);break;case"get":if(!angular.isUndefined(result))return result;break;case"set":return angular.isUndefined(result)||angular.isUndefined(paramsOrValues)||eval(look.foundIn+"."+location+" = "+JSON.stringify(paramsOrValues)),!0}return 0==result?app_extension.run("methods.oops",[type,location,paramsOrValues]):void 0},look:function(location){var module=app_extension.getScope(),child=module.$$childTail,r=!1;try{r=eval("module."+location),found="module"}catch(e){}try{r=eval("child."+location),found="child"}catch(e){}return{result:r,foundIn:found}}};app=angular.extend({},app,app_extension),angular.element(document,window).bind("touchmove",function(a){var b=angular.element(".disableScroll").length;b&&a.preventDefault()}),angular.element(document).ready(function(a){app.getScope().onReady(a)}),angular.element(window).scroll(function(a){app.getScope().onScroll(a)}),angular.element(window).on("resize",function(a){app.getScope().onResize(a)}),app.factory("backstretch",function(){var a={options:{disableThumbSize:!1,disableLargeSize:!1,thumbImgSize:"",largeImageSize:"",galleryDelay:500,galleryFadeAnimation:500},onReady:function(){var b=a;$(".backStretch").each(function(){b.generateBanner($(this),!1)})},generateBanner:function(b,c){a.build(b,c,{onLoadCallback:function(){c=0==c?$(b):$(c),c.removeClass("loading")}})},build:function(b,c,d){var e=a,f=$(b);if(0!=f.length){var d="object"==typeof d?d:{};option=$.extend({},a.options,d);var g=[];f.find("img").each(function(){var a=$(this).attr("src");a=a.split(",")[0]+e.options.largeImageSize,g.push(a),$(this).remove()}),0!=c&&f.remove();var c=0==c?f:c,h=$(c);if(g.length>0){h.addClass("hasImages");setTimeout(function(){h.backstretch(g,{duration:e.options.galleryDelay,fade:e.options.galleryFadeAnimation,onLoadCallback:function(){h.removeClass("loading").addClass("loaded"),"function"==typeof d.onLoadCallback&&d.onLoadCallback.apply(this,[g])}}),0==d.start&&h.backstretch("pause")},500)}else h.hide();return g}}};return a}),app.factory("lightbox",function(){var a={options:{selector:".lightbox"},onReady:function(){a.init()},init:function(){var b=$(a.options.selector);0!=b.length&&b.magnificPopup({type:"image",removalDelay:300,mainClass:"mfp-fade"})}};return a}),app.factory("menu",function(){var a={onReady:function(){},onScroll:function(a){$(window).scrollTop()},onResize:function(){}};return a}),app.factory("utils",function(){var a={options:{},onReady:function(){},redirect:function(a){angular.element("body").addClass("sprite loading"),window.location=a},scrollTo:function(a,b,c){$(a).length>0&&angular.element("html, body").stop(!0).animate({scrollTop:$(a).offset().top-20-b},400,function(){angular.isFunction(c)&&c.apply()})}};return a}),app.directive("autoComplete",["$http",function(a){return{restrict:"A",scope:{url:"@",ngModel:"="},require:"ngModel",link:function(a,b,c,d){b.autocomplete({source:function(b,c){var d=new RegExp(b.term,"i");e&&e.abort();var e=$.ajax({url:a.url,dataType:"json",cache:!1,success:function(a){c($.map(a,function(a){return d.test(a.label)?{label:a.label+", "+a.code,value:a.label+", "+a.code}:void 0}))}})},minLength:2,select:function(a,b){d.$setViewValue(b.item.value)}})}}}]),app.directive("googleplace",[function(){return{link:function(a,b,c){var d=new google.maps.places.Autocomplete(b[0],{});google.maps.event.addListener(d,"place_changed",function(){var b=d.getPlace(),c=b.address_components,e={};c=c.filter(function(a){switch(a.types[0]){case"locality":return e.city=a.long_name,!0;case"administrative_area_level_1":return e.state=a.long_name,!0;case"country":return e.country=a.long_name,!0;case"postal_code":e.postcode=a.long_name;default:return!1}}),e.address=b.name,a.$apply(function(){angular.merge(a.$parent.location,e)})})}}}]),app.directive("filereader",["$compile","$http",function(a,b){return{scope:{filereader:"=",destination:"@"},link:function(b,c,d){c.bind("change",function(d){b.$apply(function(){angular.isUndefined(b.filereader)&&(b.filereader=[]);var d={filename:c.val()};if(b.filereader.push(d),b.$parent.file_came_from=b.destination,angular.element("."+b.destination).length){var e='<div class="file">';e+='<small class="filename floatLeft small">'+d.filename+'<div class="inline percentage"></div></small>',e+='<button type="button" class="action fa fa-trash" ng-click="$parent.methods.removeFile(this, \''+b.destination+"');\" disabled></button>",e+="</div>";var f=angular.element(e);angular.element("."+b.destination).append(f),b.element=f;a(f)(b)}})})}}}]),app.directive("formAutoCompleteFix",function(){return function(a,b,c){b.prop("method","POST"),c.ngSubmit&&setTimeout(function(){b.unbind("submit").submit(function(d){d.preventDefault(),b.find("input, textarea, select").trigger("input").trigger("change").trigger("keydown"),a.$apply(c.ngSubmit)})},0)}}),app.directive("helpBlock",["$compile",function(a){return{scope:{field:"=",slim:"="},restrict:"E",replace:!0,template:'<div class="helper inline"><div ng-show="field.$invalid  && field.$touched" class="help-block"> * <div ng-show="slim !== true" class="inline">{{field.$name | niceLabel}} is </div>required.</div></div>',link:function(a,b,c,d){}}}]),app.controller("mainController",["$rootScope","$scope","$log","$location","$window","menu","lightbox","backstretch","utils",function(a,b,c,d,e,f,g,h,i){var j={utils:i,menu:f,lightbox:g,backstretch:h};b.module={};for(var k in j){var l=k,m={};m[l]=j[k],b.module=angular.merge({},b.module,m)}b.options={fluidLayoutSmall:1008,fluidLayoutLarge:1300,smallFluidClass:"fluid",nonFluidClass:"static",largeFluidClass:"wide",isSmaller:null,isLarger:null},b.methods={uncloak:function(){angular.element("body").removeClass("ng-cloak")},redirect:function(a,c){c||b.$$phase?e.location.href=a:b.$apply(function(){d.path(a)})},debug:function(){angular.element("body").toggleClass("debug",!angular.element("body").hasClass("debug"))},oops:function(a,b,d){console.log("ty",a,b,d),c.warn("Couldn't find "+("run"==a?"funciton":"key")+": "+b)},bindFluidClass:function(){b.options.isSmaller=Modernizr.mq("(max-width: "+b.options.fluidLayoutSmall+"px)")?!0:!1,b.options.isLarger=Modernizr.mq("(max-width: "+b.options.fluidLayoutLarge+"px)")?!0:!1;var a=angular.element(".gridContainer, body, html");a.toggleClass(b.options.smallFluidClass,b.options.isSmaller),a.toggleClass(b.options.nonFluidClass,!b.options.isSmaller),angular.element("body").toggleClass(b.options.largeFluidClass,!b.options.isLarger)}},a.onReady=function(a){b.methods.bindFluidClass();for(var c in b.module)angular.isFunction(b.module[c].onReady)&&b.module[c].onReady.apply(this,[a])},a.onResize=function(a){b.methods.bindFluidClass();for(var c in b.module)angular.isFunction(b.module[c].onResize)&&b.module[c].onResize.apply(this,[a])},a.onScroll=function(a){for(var c in b.module)angular.isFunction(b.module[c].onScroll)&&b.module[c].onScroll.apply(this,[a])}}]);